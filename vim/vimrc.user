"""{{{ BASIC OPTIONS
set sw=2             " auto indent size
set ts=2             " tab size
set et               " use space for tab
set sta              " use sw for front tab, ts else
set sm               " show matching bracket 
set ffs=unix,dos     " refers unix format

set lazyredraw       " Don't update the display while executing macro
set showmode         " Show which mode you are in
set wildmenu         " Enalbed enhanced command-line completion
set mousehide        " hide mouse cursor while typing
set shellslash       " (for windows) use \ for shell
set laststatus=2     " always put a status line in, even if there is only one window
set cot=longest,menu " complete option

"" my settings
" Set the status line the way I like it
set stl=%f\ %m\ %r\ Line:\ %l/%L[%p%%]\ Col:\ %c\ Buf:\ #%n\ [%b][0x%B]
""" END BASIC }}}

"{{{ KEYMAPS
"{{{ additional motions
" use gu/gd to go page up page down
lnoremap <M-u> <PageUp>
lnoremap <M-d> <PageDown>
" use Meta-j/k to go up down popup 
"inoremap <expr> <M-j> pumvisible() ? "\<Down>" : "\<M-j>"
"inoremap <expr> <M-k> pumvisible() ? "\<Up>" : "\<M-k>"
inoremap <M-h> <Left>
inoremap <M-j> <Down>
inoremap <M-k> <Up>
inoremap <M-l> <Right>
" highlight first item
"inoremap <expr> <C-n> pumvisible() ? '<C-n>' :
"  \ '<C-n><C-r>=pumvisible() ? "\<lt>Down>" : ""<CR>'
"}}}

"{{{ Buffer related
" Go to previous buffer
nnoremap <silent> ;j :bprevious<cr>
" Go to next buffer
nnoremap <silent> ;k :bnext<cr>
" Delete current buffer
nnoremap <silent> ;dc :bdelete<cr>
nnoremap <silent> ;dc! :bdelete!<cr>
"}}}

"{{{ Window related
" Move the cursor to the window left of the current one
noremap <silent> ,h :wincmd h<cr>
" Move the cursor to the window below the current one
noremap <silent> ,j :wincmd j<cr>
" Move the cursor to the window above the current one
noremap <silent> ,k :wincmd k<cr>
" Move the cursor to the window right of the current one
noremap <silent> ,l :wincmd l<cr>
"}}}

"{{{ editing and sourcing {g}vimrc
" edit .vimrc
nnoremap <silent> ,ev :e $MYVIMRC<cr>
nnoremap <silent> ,gev :e $MYGVIMRC<cr>
" source .vimrc
nnoremap <silent> ,sv :so $MYVIMRC<cr>
nnoremap <silent> ,gsv :so $MYGVIMRC<cr>
"}}}

"{{{ Save and Exit
" write
nnoremap <silent> ;vw :w<cr>
nnoremap <silent> ;vwa :wa<cr>
" equivalent to ZZ:
nnoremap <silent> ;vwq :wq<cr>
"nnoremap <silent> ;vw! :w!<cr>
" quite
nnoremap <silent> ;vq :q<cr>
nnoremap <silent> ;vqa :qa<cr>
nnoremap <silent> ;vq! :q!<cr>
"}}}

""{{{ Miscellaneous
" toggle paste mode
nnoremap ,p :set paste!<cr>:set paste?<cr>
" toggle highlighted search
nnoremap ,n :set invhls<cr>:set hls?<cr>
" toggle textwrap
nnoremap ,w :set wrap!<cr>:set wrap?<cr>
" retable entire file
nnoremap ,rr :1,$retab<cr>
" cd to directory of current buffer
nnoremap ,cd :lcd %:p:h<cr>
" display current directory
nnoremap ,pwd :pwd<cr>
"}}}
""" END KEYMAPS }}}

"{{{ COLOR SETTINGS
"black background
set background=dark

" The main changes I make to the colours is make Function a tad brighter so
" it's more readable. Also, I prefer darkcyan for my comments. I don't 
" like comments to be "louder" than the actual code.
" This is a hack of the clour section in 
" /usr/share/vim/syntax/syntax.vim

if &background == "dark"
  hi Constant term=underline ctermfg=Magenta guifg=Magenta
  hi Function term=bold  ctermfg=White guifg=LightRed
  hi Identifier term=underline cterm=bold guifg=#40ffff ctermfg=Cyan
  hi Ignore ctermfg=black guifg=bg
  hi Operator ctermfg=Red guifg=Red
  hi PreProc term=underline ctermfg=LightBlue guifg=#ff80ff
  hi Repeat term=underline ctermfg=White guifg=LightRed
  hi Special term=bold ctermfg=DarkMagenta guifg=LightRed
  hi Statement term=bold ctermfg=Yellow guifg=#aa4444 gui=bold
  hi Type term=underline ctermfg=LightGreen guifg=#60ff60  gui=bold
else
  hi Comment term=bold ctermfg=DarkBlue guifg=Blue
  hi Constant term=underline ctermfg=DarkRed guifg=Magenta
  hi Identifier term=underline ctermfg=DarkCyan guifg=DarkCyan
  hi Ignore ctermfg=white guifg=bg
  hi PreProc term=underline ctermfg=DarkMagenta guifg=Purple
  hi Special term=bold ctermfg=DarkMagenta guifg=SlateBlue
  hi Statement term=bold ctermfg=Brown guifg=Brown gui=bold 
  hi Type term=underline ctermfg=DarkGreen guifg=SeaGreen gui=bold
endif

hi Error term=reverse ctermbg=Red ctermfg=White guibg=Red guifg=White
hi Todo term=standout ctermbg=Yellow ctermfg=Black guifg=Blue guibg=Yellow

" Common groups that link to default highlighting.
" You can specify other highlighting easily.
hi link String Constant
hi link Character Constant
hi link Number Constant
hi link Boolean Constant
hi link Float Number
hi link Conditional Statement
hi link Label Statement
hi link Keyword Statement
hi link Exception Statement
hi link Include PreProc
hi link Define PreProc
hi link Macro PreProc
hi link PreCondit PreProc
hi link StorageClass Type
hi link Structure Type
hi link Typedef Type
hi link Tag Special
hi link SpecialChar Special
hi link Delimiter Special
hi link SpecialComment Special
hi link Debug Special
""" END COLOR }}}

"""{{{ AUTOCOMMANDS
" GNUPlot input file read by header:
au BufRead *.gp[ih]\=
      \  if getline(1) =~ '^#!.*\/gnuplot$' |
      \    set ft=gnuplot |
      \ endif

" set LaTeX textwidth to 80 and turn on spell checker
au FileType tex set tw=85 spell

au FileType vim setlocal fdm=marker
au FileType xml setlocal fdm=syntax
""" END AUTOCOMMANDS}}}

" vim: set fenc=utf-8 tw=80 sw=2 sts=2 et foldmethod=marker
