# enable ssh-agent and gpg-agentj
#[ -x "`which keychain 2> /dev/null `" ] && eval `keychain --agents gpg,ssh --eval id_dsa 2> /dev/null`

for helper in "bash_helper" "${HOME}/.bash_helper"; do
	if [ -r ${helper} ]; then
		. ${helper}
		break
	fi
done

## Colorful settings {{{
usecolor

if ${use_color}; then
	loadANSIcolor

	if [ ! ${EUID} = "0" ]; then
		PS1="\[$TXTBLD\]\[$FGCRED\]\h:\[$FGCPUR\]\W \[$FGCGRN\]\u\[$TXTRST\]\\$ "
	else
		PS1="\[$TXTBLD\]\[$FGCRED\]\u@\[$FGCPUR\]\h:\[$FGCGRN\]\W\[$TXTRST\] # "
	fi

	if ls --color >& /dev/null; then
		alias ls='ls --color=auto';
	else
		alias ls='ls -G';
	fi
else
	if [ ! ${EUID} = "0" ]; then
		PS1="\h:\W \u \\$";
	fi
fi

PS2="> $RS"
unset use_color
## }}}

## alias {{{
alias ll='ls -lh'
alias mv='mv -i'
alias rm='rm -i'
alias svi='sudo vi'
alias sshfs='sshfs -o follow_symlinks'

alias slideshow='xrandr --output VGA1 --mode 800x600 --pos 111x0'
alias rsync='rsync -e ssh --exclude-from ~/.rsync/excludes'

# Ubuntu-centric
pkgbin=`which aptitude 2> /dev/null`
if [ "x$pkgbin" != "x" ]; then
	alias apt-search='apt-cache search --names-only'
	alias apt-policy='apt-cache policy'
fi

# Gentoo-centric
pkgbin=`which ebuild 2> /dev/null`
if [ "x$pkgbin" != "x" ]; then
	alias vmconf='sudo vi /etc/make.conf'
	alias vmuse='sudo vi /etc/make.use.conf'
	alias vpuse='sudo vi /etc/portage/package.use'
	alias vpkws='sudo vi /etc/portage/package.keywords'
	alias vpumsk='sudo vi /etc/portage/package.unmask'
	alias vpmsk='sudo vi /etc/portage/package.mask'
fi
unset pkgbin
### }}}

## useful functions {{{
# use server/client mode for gvim
g() {
	if [ "x$1" = "x" ]
	then
		gvim
	else
		if [ -z "`gvim --serverlist`" ]
		then
			printf "gvim $*\n"
			gvim $*
		else
			printf "gvim --remote-silent $*\n"
			gvim --remote-silent $*
		fi
	fi
}

# generates a random integer
random() {
	dd if=/dev/urandom count=1 2> /dev/null | cksum | cut -f1 -d" "
}

# generates random password
genpasswd() {
	local l=$1
	[ -z "$l" ] && l=20
	tr -dc A-Za-z0-9_ < /dev/urandom | head -c ${l} | xargs
}
## }}}

## vim: foldmethod=marker ft=sh noet nosta
